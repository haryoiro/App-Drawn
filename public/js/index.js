!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=function(){function t(t,e){this.canvas=t,this.context=e}return t.prototype.setUpView=function(t,e,n,o,i,r){void 0===r&&(r=!1),this._settingCanvasSize(t,e),this._backgroundColor(o),this._hideMenuHandler(i),this._isImageSmoothing(n,r)},t.prototype._settingCanvasSize=function(t,e){this.canvas.width=t,this.canvas.height=e},t.prototype.clearAll=function(){this.context.clearRect(0,0,this.width,this.height),this.context.beginPath()},t.prototype._backgroundColor=function(t){this.context.fillStyle=t,this.context.fillRect(0,0,this.width,this.height)},t.prototype._hideMenuHandler=function(t){document.addEventListener("contextmenu",(function(){return t})),document.addEventListener("MSHoldVisal",(function(){return t}))},t.prototype._isImageSmoothing=function(t,e){t.imageSmoothingEnabled=e},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!0,configurable:!0}),t}(),r=[],s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.canvasColor="#000",o.zoomInvrease=1,o.defRad=10,o.dx=0,o.dy=0,o.lx=void 0,o.ly=void 0,o.capStyle="round",o.joinStyle="bevel",o.eventActivation(),o}return o(e,t),e.prototype.eventActivation=function(){var t=this;this._supportPointerEvent?(document.addEventListener("pointerdown",(function(e){return t.downPointerController(e)}),{passive:!1}),document.addEventListener("pointerup",(function(e){return t.upPointerController(e)}),{passive:!1}),document.addEventListener("pointermove",(function(e){return t.movePointerController(e)}),{passive:!1}),document.addEventListener("pointerleave",(function(e){return t.leavePointerHandler(e)}),{passive:!1})):(document.addEventListener("pointerdown",(function(e){return t.downMouseHandler(e)})),document.addEventListener("pointerup",(function(e){return t.upMouseHandler(e)})),document.addEventListener("pointermove",(function(e){return t.moveMouseHandler(e)})),document.addEventListener("pointerleave",(function(e){return t.leaveMouseHandler(e)})))},e.prototype.pointerSwitcher=function(t,e,n,o){t.pointerType},e.prototype.downPointerController=function(t){this.pointerSwitcher(t,this.handlePenDown(t),this.handleTouchDown(t),this.handleMouseDown(t))},e.prototype.movePointerController=function(t){this.pointerSwitcher(t,this.handlePenMove(t),this.handleTouchMove(t),this.handleMouseMove(t))},e.prototype.upPointerController=function(t){this.pointerSwitcher(t,this.handlePenUp(t),this.handleTouchUp(t),this.handleMouseUp(t))},e.prototype.handlePenDown=function(t){t.preventDefault(),this.drawToggle=!0},e.prototype.handleTouchDown=function(t){t.preventDefault(),this.drawToggle=!0,r.length<=1?this.p1=r[0]:r.length>=2&&(this.p1=r[0],this.p2=r[1],this.pinchDist=this._calclationPointsDistance(this.p1.pageX,this.p1.pageY,this.p2.pageX,this.p2.pageY),this.nowR=this.dist/this.pinchDist)},e.prototype.handleMouseDown=function(t){this.drawToggle=!0},e.prototype.handlePenMove=function(t){t.preventDefault(),this.drawToggle&&this.penPencilTool(t)},e.prototype.handleMouseMove=function(t){this.drawToggle&&this.mousePencilTool(t)},e.prototype.handleTouchMove=function(t){t.preventDefault();for(var e=0;e<r.length;e++)r[e].pointerId===t.pointerId&&(r[e]=t);r.length>3&&r.splice(0,3),this.p1=r[0],this.p2=r[1],this.drawToggle&&this.touchPencilTool(r[0]),r.length>=2&&(this.drawToggle=!1,this.dx=(this.p1.pageX+this.p2.pageX)/2,this.dy=(this.p1.pageY+this.p2.pageY)/2,this.dist=this._calclationPointsDistance(this.p1.pageX,this.p1.pageY,this.p2.pageX,this.p2.pageY),this.nowR=this.dist/this.pinchDist),this._pinchHandle(this.dist/this.pinchDist)},e.prototype.handlePenUp=function(t){this.drawToggle=!1,this.context.beginPath()},e.prototype.handleTouchUp=function(t){this.drawToggle=!1,this.context.beginPath(),this._removeEventStack(t)},e.prototype.handleMouseUp=function(t){this.drawToggle=!1,this.context.beginPath()},e.prototype.leavePointerHandler=function(t){this.drawToggle=!1},e.prototype.downMouseHandler=function(t){this.drawToggle=!0},e.prototype.moveMouseHandler=function(t){this.handleMouseMove(t)},e.prototype.upMouseHandler=function(t){this.drawToggle=!1,this.context.beginPath()},e.prototype.leaveMouseHandler=function(t){this.drawToggle=!1},e.prototype.mousePencilTool=function(t){var e=this.context;this.eraseTool(e),this.settingPenConf(e,this.canvasColor,this.capStyle,this.joinStyle),this.drawLine(e,t)},e.prototype.penPencilTool=function(t){var e=this.context;this.eraseTool(e),e.lineWidth=this._activatePressure(t),this.settingPenConf(e,this.canvasColor,this.capStyle,this.joinStyle),this.drawLine(e,t)},e.prototype.settingPenConf=function(t,e,n,o){t.strokeStyle=e,t.fillStyle=e,t.lineCap=n,t.lineJoin=o},e.prototype.touchPencilTool=function(t){var e=this.context;this.eraseTool(e),e.lineWidth=this.penRadius,this.settingPenConf(e,this.canvasColor,this.capStyle,this.joinStyle),this.drawLine(e,t)},e.prototype.drawLine=function(t,e){t.lineTo(e.offsetX,e.offsetY),t.stroke(),t.beginPath(),t.moveTo(e.offsetX,e.offsetY)},e.prototype.eraseTool=function(t){this.eraserToggle?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="source-over"},e.prototype.setPencilColor=function(t){this.canvasColor=t},e.prototype._calclationPointsDistance=function(t,e,n,o){var i=t-n,r=e-o;return Math.sqrt(i*i+r*r)/2},e.prototype._activatePressure=function(t){var e=this.defRad;return t.pressure<.995||t.pressure>.05?(t.pressure?e*=t.pressure:e/=t.pressure,e):t.pressure<=.05||t.pressure>.01?.05:void 0},e.prototype._removeEventStack=function(t){for(var e=0;e<r.length;e++)r[e].pointerId===t.pointerId&&r.splice(e,1)},e.prototype._pinchHandle=function(t){var e=document.getElementById("canvas").style,n="scale("+this.nowR+","+this.nowR+")";e.left=this.distX+"px",e.top=this.distY+"px",e.transform=n,e.webkitTransform=n},e.prototype._supportPointerEvent=function(){return!!window.PointerEvent},e.prototype._puressurePoints=function(t){return{x:t.offsetX,y:t.offsetY,pressurevent:t.pressure}},e.prototype._debugLogger=function(t){if(document.getElementById("debug"))document.getElementById("debug").insertAdjacentHTML("afterbegin",t+"<br>");else{var e=document.createElement("div");e.id="debug",e.insertAdjacentHTML("afterbegin",t+"<br>")}},e}(i),p=document.querySelector("#canvas"),a=p.getContext("2d"),u=new i(p,a);new s(p,a);u.setUpView(1920,1080,a,"#ffff",!0,!1)}]);
//# sourceMappingURL=index.js.map