!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=function(){function t(t,e){this.canvas=t,this.context2D=e}return t.prototype.setUpView=function(t,e,n,o,i){void 0===i&&(i=!1),this._settingCanvasSize(t,e),this._backgroundColor(n),this._hideMenuHandler(o),this._isImageSmoothing(i)},t.prototype._settingCanvasSize=function(t,e){this.canvas.width=t,this.canvas.height=e},t.prototype.clearAll=function(){this.context2D.clearRect(0,0,this.width,this.height),this.context2D.beginPath()},t.prototype._backgroundColor=function(t){this.context2D.fillStyle=t,this.context2D.fillRect(0,0,this.width,this.height)},t.prototype._hideMenuHandler=function(t){document.addEventListener("contextmenu",(function(){return t})),document.addEventListener("MSHoldVisal",(function(){return t}))},t.prototype._isImageSmoothing=function(t){this.context2D.imageSmoothingEnabled=t},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!0,configurable:!0}),t}(),r=[],s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.canvasColor="#000",o.zoomInvrease=1,o.defRad=10,o.dx=0,o.dy=0,o.lx=void 0,o.ly=void 0,o.capStyle="round",o.joinStyle="bevel",o.eventActivation(),o}return o(e,t),e.prototype.eventActivation=function(){var t=this;this._supportPointerEvent?(document.addEventListener("pointerdown",(function(e){return t.downPointerController(e)}),{passive:!1}),document.addEventListener("pointerup",(function(e){return t.upPointerController(e)}),{passive:!1}),document.addEventListener("pointermove",(function(e){t.movePointerController(e),t.drawPointObject={X:e.offsetX,Y:e.offsetY,pressure:e.pressure},console.log(t.drawPointObject)}),{passive:!1}),document.addEventListener("pointerleave",(function(){return t.leavePointerHandler()}),{passive:!1})):(document.addEventListener("mousedown",(function(){return t.downMouseHandler()})),document.addEventListener("mouseup",(function(){return t.upMouseHandler()})),document.addEventListener("mousemove",(function(e){return t.moveMouseHandler(e)})),document.addEventListener("mouseleave",(function(){return t.leaveMouseHandler()})))},e.prototype.pointerSwitcher=function(t,e,n,o){t.pointerType},e.prototype.downPointerController=function(t){this.pointerSwitcher(t,this.handlePenDown(t),this.handleTouchDown(t),this.handleMouseDown(t))},e.prototype.movePointerController=function(t){this.pointerSwitcher(t,this.handlePenMove(t),this.handleTouchMove(t),this.handleMouseMove(t))},e.prototype.upPointerController=function(t){this.pointerSwitcher(t,this.handlePenUp(),this.handleTouchUp(t),this.handleMouseUp())},e.prototype.handlePenDown=function(t){t.preventDefault(),this.drawToggle=!0,this.context2D.lineWidth=this._activatePressure(t)},e.prototype.handleTouchDown=function(t){t.preventDefault(),this.drawToggle=!0,this.context2D.lineWidth=this._activatePressure(t),r.length<=1?this.p1=r[0]:r.length>=2&&(this.p1=r[0],this.p2=r[1],this.pinchDist=this._calclationPointsDistance(this.p1.pageX,this.p1.pageY,this.p2.pageX,this.p2.pageY),this.nowR=this.dist/this.pinchDist)},e.prototype.handleMouseDown=function(t){this.drawToggle=!0,this.context2D.lineWidth=this._activatePressure(t)},e.prototype.handlePenMove=function(t){t.preventDefault(),this.drawToggle&&this.pencilTool(t)},e.prototype.handleMouseMove=function(t){this.drawToggle&&this.pencilTool(t)},e.prototype.handleTouchMove=function(t){t.preventDefault();for(var e=0;e<r.length;e++)r[e].pointerId===t.pointerId&&(r[e]=t);r.length>3&&r.splice(0,3),this.p1=r[0],this.p2=r[1],this.drawToggle&&this.pencilTool(r[0]),r.length>=2&&(this.drawToggle=!1,this.dx=(this.p1.pageX+this.p2.pageX)/2,this.dy=(this.p1.pageY+this.p2.pageY)/2,this.dist=this._calclationPointsDistance(this.p1.pageX,this.p1.pageY,this.p2.pageX,this.p2.pageY),this.nowR=this.dist/this.pinchDist),this._pinchHandle()},e.prototype.handlePenUp=function(){this.drawToggle=!1,this.context2D.beginPath()},e.prototype.handleTouchUp=function(t){this.drawToggle=!1,this.context2D.beginPath(),this._removeEventStack(t)},e.prototype.handleMouseUp=function(){this.drawToggle=!1,this.context2D.beginPath()},e.prototype.leavePointerHandler=function(){this.drawToggle=!1},e.prototype.downMouseHandler=function(){this.drawToggle=!0},e.prototype.moveMouseHandler=function(t){this.context2D.lineWidth=this.defRad,this.handleMouseMove(t)},e.prototype.upMouseHandler=function(){this.drawToggle=!1,this.context2D.beginPath()},e.prototype.leaveMouseHandler=function(){this.drawToggle=!1},e.prototype.pencilTool=function(t){this.eraseTool(),this.settingPenConf(this.canvasColor,this.capStyle,this.joinStyle),this.drawLine(this.drawPointObject.X,this.drawPointObject.Y),console.log(this.drawPointObject.X,this.drawPointObject.Y)},e.prototype.settingPenConf=function(t,e,n){this.context2D.strokeStyle=t,this.context2D.fillStyle=t,this.context2D.lineCap=e,this.context2D.lineJoin=n},e.prototype.drawLine=function(t,e){this.context2D.lineTo(t,e),this.context2D.stroke(),this.context2D.beginPath(),this.context2D.moveTo(t,e)},e.prototype.eraseTool=function(){this.eraserToggle?this.context2D.globalCompositeOperation="destination-out":this.context2D.globalCompositeOperation="source-over"},e.prototype.setPencilColor=function(t){this.canvasColor=t},e.prototype._calclationPointsDistance=function(t,e,n,o){var i=t-n,r=e-o;return Math.sqrt(i*i+r*r)/2},e.prototype._activatePressure=function(t){var e=this.defRad;return t.pressure<.995||t.pressure>.05?(t.pressure?e*=t.pressure:e/=t.pressure,e):t.pressure<=.05||t.pressure>.01?.05:void 0},e.prototype._removeEventStack=function(t){for(var e=0;e<r.length;e++)r[e].pointerId===t.pointerId&&r.splice(e,1)},e.prototype._pinchHandle=function(){var t=document.getElementById("canvas").style,e="scale("+this.nowR+","+this.nowR+")";t.left=this.distX+"px",t.top=this.distY+"px",t.transform=e,t.webkitTransform=e},e.prototype._supportPointerEvent=function(){return!!window.PointerEvent},e.prototype._puressurePoints=function(t){return{Y:t.offsetX,X:t.offsetY,pressure:t.pressure}},e.prototype._simplePoints=function(t){return{x:t.offsetX,y:t.offsetY}},e.prototype._debugLogger=function(t){if(document.getElementById("debug"))document.getElementById("debug").insertAdjacentHTML("afterbegin",t+"<br>");else{var e=document.createElement("div");e.id="debug",e.insertAdjacentHTML("afterbegin",t+"<br>")}},e}(i),p=document.querySelector("#canvas"),a=p.getContext("2d");new s(p,a).setUpView(1920,1080,"#ffff",!0,!1)}]);
//# sourceMappingURL=index.js.map